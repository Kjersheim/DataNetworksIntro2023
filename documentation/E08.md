# Documentation for E08

## Plan

- [ ] Update topology
	- [ ] Physical schematic
	- [ ] Logical schematic

- [ ] Update & add virtual machines
	- [ ] Configuration of new router
	- [ ] Loopback interfaces

- [ ] Configure OSPF on routers
	- [ ] Dynamic routing
	- [ ] Checking for routing table
	
- Connectivity tests

- Configure cybersecurity to OSPF


# Updating topology

## Physical topology
![](/documentation/E08/E08NetworkCharts-PhysicalTopologyDraft1.png)

## Logical topology
![](/documentation/E08/E08NetworkCharts-LogicalTopologyDraft1.png)



- [ ] Update topology
	- [ ] Physical schematic
	- [ ] Logical schematic



# Update & add virtual machines
Subnet No. 1

10.08.83.244/30 (0100) Between Vyos router B and C


Subnet No. 2

10.08.83.248/30 (1000) Between Vyos router A and B



Renaming Vyos Router C, initial configuration:

```	
'configure
	set system host-name [name]
	commit
	save
	exit'

Requires a full reboot of the Vyos virtual machine to take affect.
'poweroff 
y'

Checking interfaces on Vyos Router C:
'show configuration'

comparing interfaces to the adapters on the virtual machine. Updating logical and physical topology. 


Adding ip-addresses to interfaces:

Since I dont have any VLANS within the two new subnets, I set the ip address directly on the interfaces and not adding the vif option. 

' set interfaces ethernet eth3 address 10.8.83.246/30
  set interfaces ethernet eth0 address 10.8.83.250/30 
  commit
  save '

```	

![](/documentation/E08/RouterCAddresses.png)

Eventually I check the addresses and add them to each interface eth0 and eth3. 

I chose to delete the previous established static routes that were cloned from the original router. Not sure if this was neccesary if we are adding dynamic routing, but I think they would nomatter be wrong. 

![](/documentation/E08/DeletingRoutes.png)


Finally I check the configuration of the new interfaces on Vyos Router A and B, and add them to the topologies. 

![](/documentation/E08/NewCablesRouterAB.png)

From this I start a test pinging between routers. 
- Ping between Router A and B is positive. 
- Ping between Router B and C is positive. 
- Ping between Router A and C is positive. 

![](/documentation/E08/InitialRouterPingTests.png)

Ping outside of each subnet however is not yet possible, as no gateways or routing has been set. 

- [ ] Update & add virtual machines
	- [x] Configuration of new router
	- [ ] Loopback interfaces































Notes:
- Last week "switching loops" in OSI L2. Also a phenomenon called "routing loops" on L3. TTL-field in L3-packets helps preventing meltdowns.
- Static routing vs dynamic routing. Instead of creating routes, the router devices broadcast information and listen to information between eachother "adjacencies". 
- Large scale, distance vector. Distance/direction. Main protocol in this course is called Border Gateway Protocol.
- OSPF Open Shortest Path First. Calculating cost of each route by measuring/taking the metric(calculations) based on links between devices, cable quality, distance and such. 
Djikstra's algoritmn, which tell the shortest path from _one_ node to every other node. 

- Changing bandwidth reference must be done on all routers. This seems to be quite vital in particularily fast ethernets. By default the reference-bandwidth is 100 Mbits/sec. 
If you then have a 100 Mbits line, it has a cost of 1. Seeing then that you also have a line of 10 Gbit, the cost-value can not be lower than 1, hence it gets registred with the same cost. 
To take advantage of faster speeds, change the reference value. 

Adjacencies between routers are formed through exchange of OSPF -packets. 

Router-ID is the IPv4 address, set by the admin. This so the routers will know who is where/what. If this is not done/forgotten - default is that the highest binary value of the IPv4 addresses of loopback interfaces. 
Lastly if this is not avaliable, the highest IPv4 of other interfaces will be the ID. 


![](/documentation/E08/RouterRelationship_NetworkTypesOSPFv2.png)

![](/documentation/E08/OSPFNeighborshipStates.png)

- show ip route

C, physically connected, routes are better than dynamically learnt routes. 

- show ip ospf

instability? check SPF run times. If instability, it updates and runs many times. 
