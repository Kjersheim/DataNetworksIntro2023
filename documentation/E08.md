# Documentation for E08

## Plan

- [ ] Update topology
	- [ ] Physical schematic
	- [ ] Logical schematic

- [ ] Update & add virtual machines
	- [ ] Configuration of new router
	- [ ] Loopback interfaces

- [ ] Create configuration of new router a-b-c, attached to notes at the end of the document. 

- [ ] Configure OSPF on routers
	- [ ] Dynamic routing
	- [ ] Checking for routing table
	
- Connectivity tests

- Configure cybersecurity to OSPF


# Updating topology

Subnet No. 1

10.08.83.244/30 (0100) Between Vyos router B and C


Subnet No. 2

10.08.83.248/30 (1000) Between Vyos router A and B



Renaming Vyos Router C, initial configuration:

```	
'configure
	set system host-name [name]
	commit
	save
	exit'

Requires a full reboot of the Vyos virtual machine to take affect.
'poweroff 
y'

Checking interfaces on Vyos Router C:
'show configuration'

comparing interfaces to the adapters on the virtual machine. Updating logical and physical topology. 

```	




































Notes:
- Last week "switching loops" in OSI L2. Also a phenomenon called "routing loops" on L3. TTL-field in L3-packets helps preventing meltdowns.
- Static routing vs dynamic routing. Instead of creating routes, the router devices broadcast information and listen to information between eachother "adjacencies". 
- Large scale, distance vector. Distance/direction. Main protocol in this course is called Border Gateway Protocol.
- OSPF Open Shortest Path First. Calculating cost of each route by measuring/taking the metric(calculations) based on links between devices, cable quality, distance and such. 
Djikstra's algoritmn, which tell the shortest path from _one_ node to every other node. 

- Changing bandwidth reference must be done on all routers. This seems to be quite vital in particularily fast ethernets. By default the reference-bandwidth is 100 Mbits/sec. 
If you then have a 100 Mbits line, it has a cost of 1. Seeing then that you also have a line of 10 Gbit, the cost-value can not be lower than 1, hence it gets registred with the same cost. 
To take advantage of faster speeds, change the reference value. 

Adjacencies between routers are formed through exchange of OSPF -packets. 

Router-ID is the IPv4 address, set by the admin. This so the routers will know who is where/what. If this is not done/forgotten - default is that the highest binary value of the IPv4 addresses of loopback interfaces. 
Lastly if this is not avaliable, the highest IPv4 of other interfaces will be the ID. 


![](/documentation/E08/RouterRelationship_NetworkTypesOSPFv2.png)

![](/documentation/E08/OSPFNeighborshipStates.png)

- show ip route

C, physically connected, routes are better than dynamically learnt routes. 

- show ip ospf

instability? check SPF run times. If instability, it updates and runs many times. 
