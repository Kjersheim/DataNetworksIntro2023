# Documentation for E07

The functionality of a switch is to learn about their surroundings. When the switch receive an ethernet frame, and build up their forwarding table - "MAC-address table, -show fdb", they start to forward traffic in an ethernet network. 
If a switch do not have a destination MAC-address, an unknown address that is not in the FDB, the switch will spam out unknown MAC-addresses. "Unknown dstMAC frames" out of all ports. 

Within a RING topology, this is bad if there is no loop-detection, and it will form an infinite repetition loop. **Ethernet frames do not have TTL-field.**

```
Following the thread on this one to elaborate.

Historically it seems that a TTL-field on the ethernet frames were not, thought of or needed when they were introduced due to the limited complexities within networks, before switches and such were invented. 
Why not add it in later on? From what I have gained, a TTL-field would in the end just stop the one frame, and not fix an underlying issue of looping frames. 

From what I understand, if a host is caught in a loop, it is unaccessible from other hosts on the network. A "broadcast storm" can occur when there are so many frames in a loop that all avaliable bandwidth
is consumed. A TTL value would still have the frame run a loop, just not indefinitely, but long enough to cause problems? Can it be compared to a denial of service attack? 
In such a broadcast storm the forwarding tables are constantly updated with MAC-addresses, and even though the packet finally arrives at the correct destination it seems the tables are constantly faulty updated so the answer wont
be sent to the right recipient.

In the end, would not a TTL-field atleast help? But perhabs its still too little help to fix the issue. There will always be loops in a network which have been designed to avoid a single point of failure, 
and have multiple "roads". when this redundancy is introduced, loops and duplicate frames occur.  Despite the questions of TTL, this is the reason why The Spanning Tree Protocol was created, and from what I can see before entering
the materials is that it fixes the issues and TTL is out of the question. 

```


# Spanning Tree Protocol

## Plan

- [ ] Update and review current topology
	- [ ] Add Network_Switch_C to the topology, RING-topology
	- [ ] Move Lubuntu2 machine behind Network_Switch_C
	- [ ] Update adapters VirtualBox
	
- [ ] Configuration, update VLAN
	- [ ] Switch A
	- [ ] Switch B
	- [ ] Switch C

- [ ] Testing STP
	- [ ] Testing framework
	- [ ] Switch A to B
	- [ ] Switch C to B
	- [ ] Creating a loop
	
- [ ] Spanning Tree Protocol
	- [ ] Update topology schematic
	- [ ] Enable on all 3 Switches
	- [ ] Investigate port states
	- [ ] Define Root Switch
	- [ ] Testing
	
# Update and review current topology

First steps is to clone a switch and add it to the schematic, set as a RING with the other switches. Then moving Lubuntu2 behind the new switch. 

	- [x] Add Network_Switch_C to the topology, RING-topology
	- [x] Move Lubuntu2 machine behind Network_Switch_C
	
### Draft of physical topology changes

![](/documentation/E06/)E07NetworkCharts-Physical_Topology_draft1.png)


	- [ ] Update adapters VirtualBox
	


# Testing STP

## Testing framework

- To avoid loops, only keep **one** switch powered on at the time, pre STP.


